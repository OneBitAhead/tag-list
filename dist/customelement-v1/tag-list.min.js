"use strict";var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),TagList=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._items=[],e._uuid="",e}return __extends(e,t),Object.defineProperty(e.prototype,"value",{get:function(){var t=[];return[].forEach.call(this.querySelectorAll(".tagItem"),function(e){e&&e.firstChild&&t.push((e.firstChild.textContent||"").trim())}),t},set:function(t){var e=this;[].forEach.call(this.querySelectorAll(".tagItem"),function(t){t&&t.parentNode&&t.parentNode.removeChild(t)}),Array.isArray(t)||(t=[t]),t.forEach(function(t){e.addItem(t)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items||[]},set:function(t){null==t&&(t=[]),Array.isArray(t)||(t=[t]),this._items=t,this.setItems()},enumerable:!0,configurable:!0}),e.prototype.attachedCallback=function(){this.connectedCallback()},e.prototype.connectedCallback=function(){var t=this;this._items=[],this._uuid=this.uuid(),this.setupUI(),this.container=this.querySelector(".tags"),this.input=this.querySelector("input");var e=this.getAttribute("value");e&&e.split(",").map(function(e){t.addItem(e)});var i=this.getAttribute("items");i&&i.split(",").map(function(e){t.addItem(e)}),this.setupListeners(),this.datalist=this.querySelector("datalist"),this._items&&this.setItems()},e.prototype.attributeChangedCallback=function(t,e,i){["value","items"].indexOf(t)!==-1&&e!==i&&(this[t]=Array.isArray(i)?i:i.toString().split(","))},e.prototype.uuid=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},e.prototype.setupUI=function(){var t="<style>\n\t\ttag-list {\n\t\t\tdisplay: inline-block;\n\t\t}\n\t\t\ttag-list .tags {\n\t\t\t\tmargin: auto;\n\t\t\t\tmax-width:100%;\n\t\t\t\tborder: 1px solid #EAEAEA;\n\t\t\t\tmin-height: 30px;\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-wrap: wrap;\n\t\t\t}\n\t\t\ttag-list .tagItem {\n\t\t\t\tbackground-color: #F4F4F4;\n\t\t\t\tmargin: 1px;\n\t\t\t\theight: 28px;\n\t\t\t\tline-height: 28px;\n\t\t\t}\n\t\t\ttag-list .tagItem > span {\n\t\t\t\tmin-width: 20px;\n\t\t\t\tdisplay: inline-block;\n\t\t\t\tmargin: 0 8px;\n\t\t\t}\n\t\t\ttag-list .tagItem .delete {\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t\ttag-list input {\n\t\t\t\tmin-height: 28px;\n\t\t\t\tflex-grow: 1;\n\t\t\t\tmin-width: 1px;\n\t\t\t\tmax-width:100%; \n\t\t\t\twidth: 1px;\n\t\t\t\tpadding: 0 6px;\n\t\t\t\tmargin: 1px;\n\t\t\t\tbackground-color: yellow;\n\t\t\t\tborder: none;\n\t\t\t}</style>",e='<div class="tags">\n\t\t\t\t<input list="'+this._uuid+'" tabindex="0"></input>\n\t\t\t</div><datalist id="'+this._uuid+'"/>';this.innerHTML=t+e},e.prototype.addItem=function(t){if(this.container){var e=document.createElement("div");e.classList.add("tagItem"),e.innerHTML="<span>"+t+' <span class="delete">x</span></span>',this.container.insertBefore(e,this.input)}},e.prototype.setupListeners=function(){this.onClickListener=this._OnClickListener.bind(this),this.container&&this.container.addEventListener("click",this.onClickListener);var t=this;this.input.addEventListener("keyup",function(e){var i=e.which||e.keyCode;[13,32].indexOf(i)!==-1&&null!=this.value&&(""!=this.value.trim()&&t.addItem(this.value),this.value="")})},e.prototype.setItems=function(){if(this.datalist&&this._items){var t=document.createElement("DIV"),e=Array.isArray(this.items)?this.items:[this.items];e.forEach(function(e){var i=document.createElement("OPTION");i.innerText=e.toString(),t.appendChild(i)}),this.datalist.innerHTML=t.innerHTML}},e.prototype._OnClickListener=function(t){if(t.target&&t.target.classList.contains("delete")){var e=t.target.parentNode.parentNode;return void e.parentNode.removeChild(e)}this.input.focus()},e}(HTMLElement);window.customElements.define("tag-list",TagList);